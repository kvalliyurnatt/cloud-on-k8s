// Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
// or more contributor license agreements. Licensed under the Elastic License 2.0;
// you may not use this file except in compliance with the Elastic License 2.0.

package rag

// CodeChunk represents a chunk of code for embedding
type CodeChunk struct {
	ID        string   `json:"id"`
	FilePath  string   `json:"filePath"`
	StartLine int      `json:"startLine"`
	EndLine   int      `json:"endLine"`
	Type      string   `json:"type"`    // "function", "method", "type", "const", "var"
	Name      string   `json:"name"`    // Function/type name
	Package   string   `json:"package"` // Package name
	Content   string   `json:"content"` // Actual code
	Imports   []string `json:"imports"` // Relevant imports
}

// String returns a string representation of the chunk
func (c CodeChunk) String() string {
	return c.Package + "." + c.Name + " (" + c.FilePath + ":" + string(rune(c.StartLine)) + ")"
}

// HasImport checks if the chunk imports a specific package
func (c CodeChunk) HasImport(pkg string) bool {
	for _, imp := range c.Imports {
		if imp == pkg {
			return true
		}
	}
	return false
}

